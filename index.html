<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Google Search API</title>
</head>
<body>
  <h1>Google Search</h1>
  <input type="text" id="queryInput" placeholder="Enter search query" />
  <button id="searchBtn">Search</button>
  <pre id="output"></pre>

  <script>
    const searchBtn = document.getElementById('searchBtn');
    const queryInput = document.getElementById('queryInput');
    const output = document.getElementById('output');

    searchBtn.addEventListener('click', () => {
      const query = queryInput.value.trim();
      console.log('Search button clicked. Query:', query);
      if (!query) {
        output.textContent = 'Please enter a search query.';
        return;
      }

      const url = 'https://google-search122.p.rapidapi.com/';
      const headers = {
        'Content-Type': 'application/json',
        'x-rapidapi-host': 'google-search122.p.rapidapi.com',
        'x-rapidapi-key': 'f7e2ffa941msh8158f94506722bbp1b30f7jsnd8155d22d75f',
      };
      const body = JSON.stringify({
        actor: 'scraper.google.search',
        input: {
          q: query,
          hl: 'en',
          gl: 'us',
        },
      });

      console.log('Sending request with body:', body);

      fetch(url, {
        method: 'POST',
        headers,
        body,
      })
        .then(response => {
          console.log('Raw response:', response);
          if (!response.ok) throw new Error(`HTTP error ${response.status}`);
          return response.json();
        })
        .then(data => {
          console.log('API response:', data);
          output.textContent = JSON.stringify(data, null, 2);
        })
        .catch(error => {
          console.error('Fetch error:', error);
          output.textContent = 'Error: ' + error.message;
        });
    });
  </script>
</body>
</html>
